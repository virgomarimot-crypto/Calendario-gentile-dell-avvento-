<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calendario dell'Avvento</title>
  <style>
    body {
      font-family: sans-serif;
      background: url('https://images.unsplash.com/photo-1543589077-47d81606c1bf?auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
      background-size: cover;
      padding: 20px;
      text-align: center;
      color: #fff;
    }
    h1 {
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px #000;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 15px;
      max-width: 900px;
      margin: auto;
    }
    .day {
      background: rgba(214, 40, 40, 0.9);
      color: white;
      padding: 20px;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.3s;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.4), 0 0 15px rgba(255,255,255,0.8), 0 0 30px rgba(255,0,255,0.5);
      border: 3px solid rgba(255,255,255,0.7);
    }
    .day:hover {
      background: rgba(183, 28, 28, 0.9);
      transform: scale(1.05);
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: rgba(255,255,255,0.95);
      padding: 25px;
      border-radius: 10px;
      max-width: 500px;
      text-align: left;
      animation: pop 0.4s ease-out;
    }
    .modal-content p { color: purple !important; }
    .modal-content h2 { color: purple !important; }
    .close {
      float: right;
      cursor: pointer;
      font-size: 22px;
    }
    .lights {
      width: 100%;
      text-align: center;
      margin-bottom: 15px;
      font-size: 25px;
      animation: glow 1.2s infinite alternate;
    }
    @keyframes glow {
      0% { text-shadow: 0 0 5px yellow; }
      100% { text-shadow: 0 0 20px orange; }
    }
    @keyframes pop {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    .snowflake {
      position: fixed;
      top: -10px;
      color: #fff;
      user-select: none;
      pointer-events: none;
      animation: fall linear infinite;
      font-size: 20px;
    }
    @keyframes fall {
      0% { transform: translateY(-10px); opacity: 1; }
      100% { transform: translateY(100vh); opacity: 0.2; }
    }
  </style>
</head>
<body>
  <div class="lights">üí°‚ú®üí°‚ú®üí°‚ú®üí°</div>
  <h1>Calendario dell'Avvento Interattivo</h1>
  <button onclick="toggleFullscreen()" style="margin-bottom:15px; padding:10px 15px; border-radius:10px; cursor:pointer;">üîç Schermo Intero</button>

  <audio id="bgMusic" loop>
    <source src="https://dl.dropboxusercontent.com/s/eigbkglcq6nhh875grq2y/Ges-dono-per-il-cuore.mp3" type="audio/mpeg">
  </audio>
  <button onclick="toggleMusic()" id="musicControls">üéµ Attiva/Disattiva Musica</button>

  <div class="grid" id="calendar"></div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="close" id="closeBtn">&times;</span>
      <h2 id="modalDay"></h2>
      <p id="modalQuote"></p>
      <p><strong id="modalAction"></strong></p>
    </div>
  </div>

  <script>
    // Sblocco audio alla prima interazione
    let audioUnlocked = false;
    document.addEventListener('click', () => {
      if (!audioUnlocked) {
        const music = document.getElementById('bgMusic');
        music.play().catch(() => {});
        audioUnlocked = true;
      }
    });

    const data = [
      {day:"1 dicembre", quote:"Il futuro appartiene a coloro che credono nella bellezza dei propri sogni. ‚Äì E. Roosevelt", action:"Incoraggia qualcuno/a a credere in s√©."},
      {day:"2 dicembre", quote:"Non si vede bene che col cuore. ‚Äì A. de Saint-Exup√©ry", action:"Fai un complimento sincero a una persona cara."},
      {day:"3 dicembre", quote:"La speranza √® un sogno ad occhi aperti. ‚Äì Aristotele", action:"Scrivi un messaggio di incoraggiamento a qualcuno."},
      {day:"4 dicembre", quote:"La gioia √® fatta di piccoli istanti. ‚Äì R. Tagore", action:"Condividi un piccolo istante bello della giornata."},
      {day:"5 dicembre", quote:"Sii il cambiamento che vuoi vedere nel mondo. ‚Äì M. Gandhi", action:"Fai un gesto ecologico oggi."},
      {day:"6 dicembre", quote:"Tutto ci√≤ di cui hai bisogno √® amore. ‚Äì The Beatles", action:"Abbraccia qualcuno che ami."},
      {day:"7 dicembre", quote:"La gentilezza √® una lingua che i sordi possono udire. ‚Äì M. Twain", action:"Offri aiuto a una persona in difficolt√†."},
      {day:"8 dicembre", quote:"La felicit√† √® reale solo se condivisa. ‚Äì C. McCandless", action:"Condividi qualcosa che ti rende felice."},
      {day:"9 dicembre", quote:"La gratitudine √® il cuore della memoria. ‚Äì J. Saramago", action:"Ringrazia qualcuno per un gesto passato."},
      {day:"10 dicembre", quote:"La bellezza salver√† il mondo. ‚Äì F. Dostoevskij", action:"Crea qualcosa di bello."},
      {day:"11 dicembre", quote:"Niente √® pi√π forte di un cuore puro. ‚Äì W. Shakespeare", action:"Fai un favore anonimo."},
      {day:"12 dicembre", quote:"L‚Äôessenziale √® invisibile agli occhi. ‚Äì A. de Saint-Exup√©ry", action:"Ascolta davvero qualcuno/a."},
      {day:"13 dicembre", quote:"Dove c‚Äô√® amore c‚Äô√® vita. ‚Äì M. Gandhi", action:"Dedica tempo a qualcuno che ne ha bisogno."},
      {day:"14 dicembre", quote:"Ogni istante √® un nuovo inizio. ‚Äì T.S. Eliot", action:"Perdona te stesso per qualcosa."},
      {day:"15 dicembre", quote:"La poesia √® un atto di pace. ‚Äì P. Neruda", action:"Lascia una frase gentile su un post-it."},
      {day:"16 dicembre", quote:"Chi ha un perch√© pu√≤ sopportare quasi ogni come. ‚Äì F. Nietzsche", action:"Scrivi il tuo perch√© di oggi."},
      {day:"17 dicembre", quote:"La vita √® un mistero da vivere. ‚Äì O. Wilde", action:"Fai qualcosa di nuovo."},
      {day:"18 dicembre", quote:"La luce brilla nelle tenebre. ‚Äì Vangelo di Giovanni", action:"Accendi una candela pensando a qualcuno."},
      {day:"19 dicembre", quote:"Solo chi rischia pu√≤ volare. ‚Äì W. Shakespeare (attr.)", action:"Prova un piccolo rischio positivo."},
      {day:"20 dicembre", quote:"La vera generosit√† √® fare il bene senza attendere nulla. ‚Äì A. France", action:"Dona qualcosa."},
      {day:"21 dicembre", quote:"Ogni sorriso ti rende pi√π giovane. ‚Äì G. Eliot", action:"Regala un sorriso a un/una estraneo/a."},
      {day:"22 dicembre", quote:"L‚Äôamicizia raddoppia le gioie. ‚Äì Cicerone", action:"Contatta un/una amico/a lontano/a."},
      {day:"23 dicembre", quote:"Ci√≤ che dai ti ritorna. ‚Äì L. Tolstoj", action:"Fai una piccola sorpresa a qualcuno."},
      {day:"24 dicembre", quote:"E il cuore si apre a ci√≤ che √® buono. ‚Äì J. Keats", action:"Scegli un gesto gentile per il nuovo anno."}
    ];

    const calendar = document.getElementById("calendar");

    data.forEach((entry, index) => {
      const box = document.createElement("div");
      box.className = "day";
      box.textContent = index + 1;
      box.onclick = () => openModal(entry);
      calendar.appendChild(box);
    });

    const modal = document.getElementById("modal");
    const closeBtn = document.getElementById("closeBtn");

    function openModal(entry) {
      document.getElementById("modalDay").textContent = entry.day;
      document.getElementById("modalQuote").textContent = entry.quote;
      document.getElementById("modalAction").textContent = "Azione: " + entry.action;
      modal.style.display = "flex";
    }

    closeBtn.onclick = () => modal.style.display = "none";
    window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

    function toggleMusic() {
      const music = document.getElementById('bgMusic');
      if (music.paused) music.play(); else music.pause();
    }

    function toggleFullscreen() {
      if (!document.fullscreenElement) document.documentElement.requestFullscreen();
      else document.exitFullscreen();
    }

    function createSnowflakes() {
      for (let i = 0; i < 25; i++) {
        const snow = document.createElement('div');
        snow.className = 'snowflake';
        snow.textContent = '‚ùÑ';
        snow.style.left = Math.random() * 100 + 'vw';
        snow.style.animationDuration = 5 + Math.random() * 10 + 's';
        snow.style.fontSize = 15 + Math.random() * 20 + 'px';
        document.body.appendChild(snow);
        setTimeout(() => snow.remove(), 15000);
      }
    }
    setInterval(createSnowflakes, 2000);
  </script>
</body>
</html>
